{% render 'partials/head.liquid', title: 'Webinars' %}

<section class="webinars-banner">
    {% render 'partials/breadcrumbs.liquid', breadcrumb_title: 'Webinars', breadcrumb_url: '/webinars' %}

    <h1>Webinars</h1>
    <p>Lorem ipsum odor amet, consectetuer adipiscing elit. Enim ipsum non egestas; primis luctus cubilia. Donec ut
        venenatis.</p>
</section>

<div class="filters">
    <div class="wrapper-filter">
        <form class="filter-form">
            <label class="filter-link">
                <input type="radio" name="category" value="" {% if not selectedCategory or selectedCategory==""
                    %}checked{% endif %}> All
            </label>

            {% for category in categories %}
            <label class="filter-link">
                <input type="radio" name="category" value="{{ category.name }}" {% if selectedCategory==category.name
                    %}checked{% endif %}>
                {{ category.name }}
            </label>
            {% endfor %}
        </form>
    </div>

    <form method="GET" action="/webinars">
        <span id="sortText">Sort webinars</span>
        <select name="sort" onchange="this.form.submit()">
            <!-- Placeholder for when the page is loaded or if no selection is made -->
            <option value="" disabled {% if selectedSort=="" %}selected{% endif %}>Choose an option</option>

            <!-- Actual sort options -->
            <option value="new-old" {% if selectedSort=="new-old" %}selected{% endif %}>New to Old</option>
            <option value="old-new" {% if selectedSort=="old-new" %}selected{% endif %}>Old to New</option>
        </select>
        <input type="hidden" name="category" value="{{ selectedCategory }}">
    </form>
</div>

<section>
    <h2>Results</h2>
    <p>3 webinars</p>

    <ul class="webinars">
        {% for webinar in webinars %}

        <li class="webinar">
            <a href="/webinars/{{ webinar.slug }}">
                <div class="webinar-img">
                    <img src="https://fdnd-agency.directus.app/assets/{{ webinar.thumbnail }}" alt="" width="50px">
                    <p class="duration">{{ webinar.duration }}</p>
                </div>
                <h3>{{ webinar.title | truncatewords: 10 }}</h3>
                <p class="speaker">
                    {% for speaker in webinar.speakers %}
                    {{ speaker.avl_speakers_id.fullname }}
                    {% endfor %}
                </p>

                <div>
                    <ul>
                        {% for categorie in webinar.categories %}
                        <li>
                            <p class="categorie-label">{{ categorie.avl_categories_id.name }}</p>
                        </li>
                        {% endfor %}


                    </ul>
                    {% assign webinarIdString = webinar.id | string | strip %}
                    <form method="POST" action="/">
                        <input type="hidden" name="textField" value="{{ webinar.id }}">
                        <input type="hidden" name="forField" value="Watchlist Amber">
                        <button type="submit">
                            {% if watchlistIds contains webinarIdString %}
                            ❌ Verwijder uit watchlist
                            {% else %}
                            ✅ Voeg toe aan watchlist
                            {% endif %}
                        </button>
                    </form>
                </div>
            </a>
        </li>

        {% endfor %}
    </ul>
</section>

{% render 'partials/foot.liquid' %}